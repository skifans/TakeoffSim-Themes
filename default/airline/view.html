<!DOCTYPE html>
<!--
  ~ Copyright (c) Erik Partridge 2015. All rights reserved, program is for TakeoffSim.com
  -->

<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>{{airline.name}}</title>
    <link href="../resources/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="../resources/js/jquery.min.js"></script>
    <script type="text/javascript" src="../resources/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script type="text/javascript" src="../resources/js/arc.js"></script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div id="map" style="width: 96%; height: 85%;"></div>
            </div>
        </div>
        <p>Welcome to {{airline.name}}'s route map. You can go to your airline's home page at any time by clicking below.</p>
        <p><a href="/human/index">home</a></p>
    </div>
</body>
<script>
    var map = L.map('map').setView([{{airline.headquarters.latitude}}, {{airline.headquarters.longitude}}], 5);
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
        '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="http://mapbox.com">Mapbox</a>'
    }).addTo(map);
    {% for r in airline.routes %}
        var start = { x: r.departs.longitude, y : r.departs.latitude};
        var end = { x: r.arrives.longitude, y : r.arrives.latitude };
        var gen = new arc.GreatCircle(start, end, {"name": r.toString});
        var line = generator.Arc(200,{offset:10});
        L.geoJson.addTo(map);
        {% endfor %}

</script>
</html>