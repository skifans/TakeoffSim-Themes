<!DOCTYPE html>
<!--
  ~ Copyright (c) Erik Partridge 2015. All rights reserved, program is for TakeoffSim.com
  -->

<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Creating a New Flight</title>
    <link href="../resources/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="../resources/js/jquery.min.js"></script>
    <script type="text/javascript" src="../resources/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../resources/js/chosen/chosen.jquery.min.js"></script>
    <link href="../resources/js/chosen/chosen.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 style="margin-left: auto; margin-right:auto;">Creating a new route</h1>
        <div class="row">
            <div class="col-md-6">
                <p>Depart:</p>
                <select name="depart" id="depart">
                    {% for apt in airports %}
                        <option>{{apt.icao}} - {{apt.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <p>Arrive:</p>
                <select name="arrive" id="arrive">
                    {% for apt in airports %}
                        <option>{{apt.icao}} - {{apt.name}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-5"></div>
            <div class="col-md-2">
                <button id="researchGo">Research Route!</button>
            </div>
            <div class="col-md-5">
                <a href="/human/index" style="align:right;"><img width="20px" src="/resources/img/home.svg" alt="home"></a>
            </div>
        </div>
        <hr>
    </div>
    <div class="container" id="results">
        <div class="row" id="loading">
            <div class="col-md-5">
            </div>
            <div class="col-md-2">
                <p>Researching... Stand by</p>
            </div>
            <div class="col-md-5"></div>
        </div>
        <div class="row" id="res">
            <div class="col-md-5">
                <canvas id="chart" width="450px" height="250px"></canvas>
            </div>
            <div class="col-md-4">
                <h4>Operates:</h4>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Monday" value="Monday" checked="true">Monday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Tuesday" value="Tuesday" checked="true">Tuesday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Wednesday" value="Wednesday" checked="true">Wednesday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Thursday" value="Thursday" checked="true">Thursday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Friday" value="Friday" checked="true">Friday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Saturday" value="Saturday" checked="true">Saturday
                </label>
                <label class=" no_ident checkbox-inline">
                    <input type="checkbox" id="Sunday" value="Sunday" checked="true">Sunday
                </label>
                <br><hr>
                <label class="no_ident checkbox-inline">
                    <input type="checkbox" id="auto-gates" value="auto-gates" checked="true" laceholder="true">Auto-Buy Gates?
                </label>
            </div>
            <div class="col-md-3">
                <p>Flight Number</p>
                <div class="input-group-addon">{{airline.icao}}</div>
                <input type="text" class="form-control" value="{{default}}" id="flightNumber" placeholder="1354" required>
                <hr><br>
                <button class="submit" value="submit" id="submit">Next!</button>
            </div>
        </div>
        <div class="container" id="hide2">
            <h3>Great! Now just a couple more details...</h3>
            <div class="col-md-6">
                <label for="type">Aircraft Type
                    <select id="type">
                        {% for t in airline.types() %}
                            <option>{{t.icao}} - {{t.name}}</option>
                        {% endfor %}
                    </select>
                </label>
                <label for="plane">Airplane
                    <select id="plane">

                    </select>
                </label>
            </div>
            <div class="col-md-6">
            </div>
        </div>
    </div>
    <script>
        $('#loading').hide();
        $('#res').hide();
        $('#hide2').hide();
        $('#plane').hide();
        var ctx = document.getElementById("chart").getContext("2d");

        $("#researchGo").click(function(){
            $('#loading').show();
            $.ajax({
                url: '/ajax/researchRoute.json',
                data: "depart=" + $('#depart').val() + "&arrive=" + $("#arrive").val(),
                datatype: 'json',
                success : function(data){
                    var projected = data[0];
                    var onroute = data[1];
                    var d = {
                        labels: ["Daily O & D", "Current Seats"],
                        datasets: [
                            {
                                label:"Your Researcher",
                                fillColor: "rgba(151,187,205,0.8)",
                                strokeColor: "rgba(151,187,205,0.8)",
                                highlightFill: "rgba(151,187,205,0.75)",
                                highlightStroke: "rgba(151,187,205,1)",
                                data: [projected, onroute]
                            }
                        ]
                    }
                    var chart = new Chart(ctx).Bar(d);
                    $("#res").show();
                    $("#loading").hide();
                }
            });

        });


        $('#depart').chosen({no_results_text: 'Oops, no airport found!'});
        $('#arrive').chosen({no_results_text: 'Oops, no airport found!'});


    </script>
</body>
</html>